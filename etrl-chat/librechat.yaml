version: 1.3.4

cache: true
fileStrategy: "s3"

# ==============================================================================
# 1. ИНТЕРФЕЙС
# ==============================================================================
interface:
  appTitle: 'ETRL Chat'
  customWelcome: 'Добро пожаловать в ETRL Chat!'
  customCSS: true # <--- ПЕРЕНЕСЕНО СЮДА (из корня)
  
  runCode: false
  endpointsMenu: false 
  modelSelect: false
  parameters: false
  presets: false
  showTokens: false
  
  sidePanel: true
  fileSearch: true
  bookmarks: true
  multiConvo: true
  fileCitations: true
  agents:
    use: true
  prompts:
    use: true
  marketplace:
    use: false
  mcpServers:
    use: false

# ==============================================================================
# 2. ЭНДПОИНТЫ (Бэкенд)
# ==============================================================================
endpoints:
  custom:
    - name: 'etrl' # Имя этого эндпоинта
      apiKey: '${ETRL_API_KEY}'
      baseURL: 'https://api.z.ai/api/coding/paas/v4'
      models:
        default: ['glm-4.7']
        fetch: false
      titleConvo: true
      titleModel: 'glm-4.7'
      modelDisplayLabel: 'ETRL AI'
      dropParams: ['stop', 'user', 'frequency_penalty', 'presence_penalty']
      supportsFiles: true
      fileTypes: ['image/*', 'application/pdf', 'text/*']

# ==============================================================================
# 3. СПЕЦИФИКАЦИЯ МОДЕЛЕЙ (То, что видит юзер)
# ==============================================================================
modelSpecs:
  list:
    - name: 'glm-4.7'
      label: 'ETRL AI'
      description: 'Ваш персональный AI помощник'
      default: true # Делаем модель основной
      preset:
        endpoint: 'etrl' # <--- ДОЛЖНО СОВПАДАТЬ С name В endpoints.custom ВЫШЕ
        model: 'glm-4.7'
      fileUpload: true
      visionCapable: true

# ==============================================================================
# 4. БИЛЛИНГ
# ==============================================================================
balance:
  enabled: true
  startBalance: 5000
  autoRefillEnabled: true
  refillIntervalValue: 1
  refillIntervalUnit: "days"
  refillAmount: 2000

# ==============================================================================
# 5. ОГРАНИЧЕНИЯ
# ==============================================================================
fileConfig:
  serverFileSizeLimit: 50
  avatarSizeLimit: 2
  endpoints:
    custom:
      fileLimit: 5
      fileSizeLimit: 10

rateLimits:
  messages:
    max: 100                # Максимальное количество сообщений
    windowInMinutes: 60     # Временное окно в минутах (1 час)
  
  # Дополнительные лимиты для безопасности
  fileUploads:
    ipMax: 20
    ipWindowInMinutes: 60
  conversationsImport:
    ipMax: 5
    ipWindowInMinutes: 60
